<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>ArcGIS Maps SDK for JavaScript Tutorials: Display a map</title>
    <script src=auth_key.js></script>
    <link rel="stylesheet" type="text/css" href="https://js.arcgis.com/calcite-components/2.13.2/calcite.css" />
    <script type="module" src="https://js.arcgis.com/calcite-components/2.13.2/calcite.esm.js"></script>

    <!-- Load the ArcGIS Maps SDK for JavaScript from CDN -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.31/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.31/"></script>

    <!-- Load Map components from CDN-->
    <script
      type="module"
      src="https://js.arcgis.com/map-components/4.31/arcgis-map-components.esm.js"
    ></script>
  </head>

  <style>
    html,
    body,
    arcgis-map {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }
  </style>

  <body>
    <arcgis-map basemap="arcgis/topographic" center="-118.805, 34.027" zoom="13">
        <arcgis-zoom position="top-left"></arcgis-zoom>
    </arcgis-map>

    <script>
        require(["esri/Graphic", "esri/layers/GraphicsLayer"], (Graphic, GraphicsLayer) => {
            const arcgisMap = document.querySelector("arcgis-map");
            arcgisMap.addEventListener("arcgisViewReadyChange", () => {

            const graphicsLayer = new GraphicsLayer();
            arcgisMap.addLayer(graphicsLayer);
            
            let displayRoute = JSON.parse(localStorage.getItem('scratchmap_routes'));

                const polyline = {
                type: "polyline",
                paths: displayRoute
                }
            
                const simpleLineSymbol = {
                type: "simple-line",
                color: [226, 119, 40], // Orange
                width: 2
                };

                const polylineGraphic = new Graphic({
                geometry: polyline,
                symbol: simpleLineSymbol
                });

            graphicsLayer.add(polylineGraphic);
            //}   
        });
        }
        );
  
      </script>


  </body>

</html>